# Task discussion T114: Remove trivial ({e}) and full (G) subgroups from Layer 3

## [2026-03-01 16:19] boss (author)

### Task description

CONTEXT: Layer 3 asks player to find all subgroups. Currently includes trivial subgroup {e} and full group G. These are boring — every group has them. Remove them.

TASK:
1. In keyring_assembly_manager.gd (or equivalent):
   - Filter out {e} (identity-only subgroup) from the target list
   - Filter out G (the full group itself) from the target list
   - Only non-trivial proper subgroups remain as targets
2. Update subgroup count in level data / runtime:
   - Total keyrings = total_subgroups - 2 (minus trivial and full)
   - For groups where there are NO non-trivial proper subgroups (e.g., Z_p for prime p), the level has 0 keyrings — Layer 3 is auto-completed or skipped
3. Update math_consultant catalog (T095) references if needed
4. Update SubgroupChecker if it provides the list
5. Update tests

EDGE CASES:
- Z2: only subgroups are {e} and Z2 itself → 0 non-trivial → Layer 3 auto-complete
- Z3: same → 0 non-trivial → auto-complete
- Z4: subgroups {e}, Z2, Z4 → only Z2 remains → 1 keyring
- Z_p (prime): always auto-complete on Layer 3
- S3: subgroups include Z2, Z3 (non-trivial proper) → interesting

VERIFICATION:
- Layer 3 never shows {e} or G as keyring targets
- Subgroup count correct for all 24 levels
- Prime-order groups handle gracefully (auto-complete or skip)
- Tests pass

### Acceptance criteria

[To be clarified]

---
