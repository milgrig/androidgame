# Task discussion T052: QA: Полный тест багфиксов + уровни 13-16 через Agent Bridge

## [2026-02-27 08:31] boss (author)

### Task description

Интеграционное тестирование багфиксов Акта 1 и новых уровней Акта 2.

ТЕСТЫ БАГФИКСОВ:

1. **Окошко цели (T043)**:
   - Загрузить КАЖДЫЙ из 12 уровней Акта 1
   - Через get_tree проверить: TargetPreview → TargetGraphDraw существует
   - TargetGraphDraw имеет дочерние ноды (Line2D, Polygon2D)
   - Миниатюра отображает правильное количество узлов и рёбер
   - После нахождения identity: рамка меняет цвет с золотого на зелёный

2. **Кнопка ПОВТОРИТЬ (T044)**:
   - level_01 (Z3): найти r1, нажать ПОВТОРИТЬ → визуальное перемещение + r2 найден
   - level_05 (D4): найти r1, нажать ПОВТОРИТЬ 3 раза → r2, r3 найдены
   - level_11 (Z6): найти r1, нажать ПОВТОРИТЬ 5 раз → все ключи найдены
   - Проверить что анимация не 'телепортирует' кристаллы
   - Проверить что цепочка повторов работает (5+ раз подряд)

ТЕСТЫ АКТА 2:

3. **Уровни 13-16**:
   - Загрузка каждого уровня через Agent Bridge
   - get_state() возвращает subgroups и inner_doors
   - Найти ВСЕ автоморфизмы (как в Акте 1)
   - Проверить check_subgroup с правильной подгруппой → is_subgroup: true
   - Проверить check_subgroup с неправильным набором → is_subgroup: false
   - Открыть все внутренние двери
   - Пройти уровень полностью (все ключи + все двери)

4. **Регрессия Акта 1**:
   - Пройти level_01, level_05, level_09, level_12 — всё работает как раньше
   - Никаких subgroups/doors в уровнях Акта 1

5. **Карта мира с Wing 2**:
   - Wing 2 заблокирован при < 8 залов Wing 1
   - Wing 2 доступен при >= 8 залов Wing 1
   - Навигация между wings работает

DELIVERABLES:
- Скрипт тестирования (расширение test_all_levels_comprehensive.py)
- QA отчёт PASS/FAIL
- Список найденных багов

### Acceptance criteria

[To be clarified]

---
