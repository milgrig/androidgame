# Task discussion T045: Математик: спецификация групп и подгрупп для уровней 13-16 (Акт 2, внутренние замки)

## [2026-02-27 08:29] boss (author)

### Task description

Разработать математические спецификации для первого блока Акта 2: «Внутренние замки» (подгруппы).

КОНТЕКСТ (из Game.txt строки 18-21):
Акт 2 — «Подгруппы и нормальность» (уровни 13–24)
Уровень 13–16: Внутренние замки. Внутри зала появляются внутренние двери. Чтобы открыть внутреннюю дверь, достаточно подмножества ключей — но это подмножество должно быть само замкнуто (комбинация двух ключей из подмножества тоже в подмножестве). Игрок открывает подгруппы.

ЗАДАЧИ:
Для каждого уровня (13, 14, 15, 16) предоставить:

1. **Граф**: nodes (id, color, position, label), edges (from, to, type, directed)
2. **Группа автоморфизмов**: все перестановки, group_name, group_order
3. **Подгруппы**: ВСЕ подгруппы с указанием:
   - Элементы подгруппы (какие перестановки)
   - Порядок подгруппы
   - Является ли нормальной
   - Решётка подгрупп (кто в кого включается)
4. **Таблица Кэли**: полная таблица композиций
5. **Дизайн внутренних дверей**: какие подгруппы соответствуют 'внутренним дверям'
6. **Подсказки (echo_hints)**: 3 уровня подсказок для каждого уровня

ТРЕБОВАНИЯ К УРОВНЯМ:
- **Level 13**: Простая группа с очевидной подгруппой (например S3, подгруппа Z3). Игрок должен понять концепцию подмножества ключей.
- **Level 14**: Группа с несколькими подгруппами (например D4 → Z4, V4, Z2). Игрок ищет разные внутренние двери.
- **Level 15**: Группа где подгруппа визуально 'видна' на графе (например кластерная структура).
- **Level 16**: Группа с подгруппой которую нужно НАЙТИ через эксперимент (не очевидна визуально).

МАТЕМАТИЧЕСКАЯ СТРОГОСТЬ:
- Проверить замкнутость каждой подгруппы
- Проверить наличие обратного для каждого элемента
- Построить решётку подгрупп
- Для каждой подгруппы указать нормальность (пригодится для уровней 17-20)

ФОРМАТ ДОСТАВКИ:
JSON-файлы level_13.json..level_16.json в том же формате что act1 уровни, но с дополнительным полем subgroups:
{
  'subgroups': [
    {'name': 'Z3', 'order': 3, 'elements': [[0,1,2], [1,2,0], [2,0,1]], 'is_normal': true, 'is_inner_door': true}
  ]
}

MUST прочитать:
- Game.txt строки 18-21
- data/levels/act1/level_05.json (пример формата D4)
- data/levels/act1/level_09.json (пример формата S3)
- .tayfa/math_consultant/T025_VERIFICATION_REPORT.md (формат верификации)

### Acceptance criteria

[To be clarified]

---
