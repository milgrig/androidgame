# Task discussion T098: UI for Layer 3: split-screen with keyring assembly panel

## [2026-02-27 22:08] boss (author)

### Task description

CONTEXT: Layer 3 engine from T097, architecture from T096.

TASK:
1. Read architecture from .tayfa/architect/T096_LAYER3_ARCHITECTURE.md
2. Create keyring_panel.gd in src/game/ or src/ui/:
   - Split crystal zone into two parts:
     * LEFT (smaller, ~30-35%): keyring assembly area
     * RIGHT (~65-70%): crystals + room map (unchanged from Layers 1-2)
   - Keyring slots displayed vertically in left zone
   - Each slot shows: empty state / keys being added / locked (gold) state
   - Keys inside a keyring shown as colored dots/numbers matching key_bar
3. Implement drag-and-drop:
   - Source: key_bar buttons (COPY, not move — keys stay in bar)
   - Target: active keyring slot
   - Tap key in keyring to remove it
   - Visual drag feedback (ghost key follows finger/cursor)
4. Gold color scheme for Layer 3
5. Visual feedback:
   - Subgroup found → gold glow on keyring, lock icon appears
   - Duplicate → gentle shake or flash
   - Progress counter: 'Найдено X из N брелков'
6. Update level_scene.gd:
   - Layer 3 mode creates split layout
   - Crystal dragging disabled
   - No target preview
   - Room map visible in right zone
7. Completion summary when all keyrings filled

VERIFICATION:
- Split-screen renders correctly
- Drag-and-drop works from key_bar to keyring
- Keyrings lock on valid subgroup
- Gold theme visible
- Works on all group sizes (3-24 keys)

### Acceptance criteria

[To be clarified]

---
