# Task discussion T086: Architect: design Layer 2 (inverse keys) mechanics and data model

## [2026-02-27 18:50] boss (author)

### Task description

CONTEXT: Layer 2 (green) is the next gameplay layer. See redesign.md section 0.\n\nLayer 2 concept: For each key (automorphism) found on Layer 1, player must find the INVERSE key. Player learns that every operation is reversible.\n\nTASK:\n1. Design the data model: how does Layer 2 state get stored? Options:\n   a) Same level JSON files with layer-specific metadata\n   b) Separate layer config that references act1 levels\n   c) Layer field in hall_tree.json\n2. Design the gameplay flow:\n   - Player enters a level on Layer 2\n   - They see the keys they found on Layer 1\n   - For each key, they must find the inverse permutation\n   - How does the UI present this? (drag-and-drop? selection?)\n3. Design the validation logic:\n   - How does the game check that the selected permutation is actually the inverse?\n   - When is Layer 2 complete for a level? (all inverses found)\n4. Design progression:\n   - How does hall_tree.json / hall_progression_engine track Layer 2 progress?\n   - What percentage of Layer 1 must be complete to unlock Layer 2?\n5. Consider future layers: the architecture must be extensible to Layers 3-5\n\nDELIVERABLE: Architecture document in .tayfa/architect/T086_LAYER2_ARCHITECTURE.md

### Acceptance criteria

[To be clarified]

---
