# Task discussion T105: Implement Layer 4 engine: conjugation cracking manager and normality validation

## [2026-02-28 10:18] boss (author)

### Task description

CONTEXT: Architecture from T104, normality catalog from T103. SubgroupChecker.is_normal() already exists in src/core/subgroup_checker.gd. TASK: 1) Read architecture from .tayfa/architect/T104_LAYER4_ARCHITECTURE.md. 2) Create conjugation_cracking_manager.gd in src/core/: manages active keyring under test, tracks which (g,h) pairs have been tried, computes ghg-1 and checks membership in H, tracks cracked vs unbreakable keyrings, detects Layer 4 completion. 3) Extend layer_mode_controller.gd for LAYER_4_NORMAL mode. 4) Extend hall_progression_engine.gd for Layer 4 progress. 5) Add layer_4 section to level JSON data (normality info per subgroup from T103). 6) Write unit tests: conjugation computation, cracking detection, unbreakable validation (min attempts threshold), wrong unbreakable claim rejection, save/restore, completion. VERIFICATION: Conjugation works for all group types (Z,D,S,A,Q8). Non-normal subgroups crackable. Normal subgroups pass unbreakable check. All unit tests pass.

### Acceptance criteria

[To be clarified]

---
