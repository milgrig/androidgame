{
  "meta": {
    "id": "act1_level05",
    "act": 1,
    "level": 5,
    "title": "Зеркальный квадрат",
    "subtitle": "Стрелки убраны, появились отражения",
    "group_name": "D4",
    "group_order": 8
  },
  "graph": {
    "nodes": [
      {
        "id": 0,
        "color": "blue",
        "position": [
          520,
          240
        ],
        "label": "A"
      },
      {
        "id": 1,
        "color": "blue",
        "position": [
          760,
          240
        ],
        "label": "B"
      },
      {
        "id": 2,
        "color": "blue",
        "position": [
          760,
          480
        ],
        "label": "C"
      },
      {
        "id": 3,
        "color": "blue",
        "position": [
          520,
          480
        ],
        "label": "D"
      }
    ],
    "edges": [
      {
        "from": 0,
        "to": 1,
        "type": "standard",
        "weight": 1
      },
      {
        "from": 1,
        "to": 2,
        "type": "standard",
        "weight": 1
      },
      {
        "from": 2,
        "to": 3,
        "type": "standard",
        "weight": 1
      },
      {
        "from": 3,
        "to": 0,
        "type": "standard",
        "weight": 1
      }
    ]
  },
  "symmetries": {
    "automorphisms": [
      {
        "id": "e",
        "mapping": [
          0,
          1,
          2,
          3
        ],
        "name": "Тождество",
        "description": "Всё остаётся на месте"
      },
      {
        "id": "r1",
        "mapping": [
          1,
          2,
          3,
          0
        ],
        "name": "Поворот на 90°",
        "description": "Четверть оборота по часовой"
      },
      {
        "id": "r2",
        "mapping": [
          2,
          3,
          0,
          1
        ],
        "name": "Поворот на 180°",
        "description": "Пол-оборота"
      },
      {
        "id": "r3",
        "mapping": [
          3,
          0,
          1,
          2
        ],
        "name": "Поворот на 270°",
        "description": "Три четверти оборота"
      },
      {
        "id": "sh",
        "mapping": [
          1,
          0,
          3,
          2
        ],
        "name": "Отражение по горизонтали",
        "description": "Поменять левый и правый столбцы"
      },
      {
        "id": "sv",
        "mapping": [
          3,
          2,
          1,
          0
        ],
        "name": "Отражение по вертикали",
        "description": "Поменять верхнюю и нижнюю строки"
      },
      {
        "id": "sd",
        "mapping": [
          0,
          3,
          2,
          1
        ],
        "name": "Отражение по диагонали \\",
        "description": "Отразить по диагонали A-C"
      },
      {
        "id": "sa",
        "mapping": [
          2,
          1,
          0,
          3
        ],
        "name": "Отражение по побочной диагонали",
        "description": "Отразить по диагонали B-D"
      }
    ],
    "generators": [
      "r1",
      "sh"
    ],
    "cayley_table": {
      "e": {
        "e": "e",
        "r1": "r1",
        "r2": "r2",
        "r3": "r3",
        "sh": "sh",
        "sv": "sv",
        "sd": "sd",
        "sa": "sa"
      },
      "r1": {
        "e": "r1",
        "r1": "r2",
        "r2": "r3",
        "r3": "e",
        "sh": "sa",
        "sv": "sd",
        "sd": "sh",
        "sa": "sv"
      },
      "r2": {
        "e": "r2",
        "r1": "r3",
        "r2": "e",
        "r3": "r1",
        "sh": "sv",
        "sv": "sh",
        "sd": "sa",
        "sa": "sd"
      },
      "r3": {
        "e": "r3",
        "r1": "e",
        "r2": "r1",
        "r3": "r2",
        "sh": "sd",
        "sv": "sa",
        "sd": "sv",
        "sa": "sh"
      },
      "sh": {
        "e": "sh",
        "r1": "sd",
        "r2": "sv",
        "r3": "sa",
        "sh": "e",
        "sv": "r2",
        "sd": "r1",
        "sa": "r3"
      },
      "sv": {
        "e": "sv",
        "r1": "sa",
        "r2": "sh",
        "r3": "sd",
        "sh": "r2",
        "sv": "e",
        "sd": "r3",
        "sa": "r1"
      },
      "sd": {
        "e": "sd",
        "r1": "sv",
        "r2": "sa",
        "r3": "sh",
        "sh": "r3",
        "sv": "r1",
        "sd": "e",
        "sa": "r2"
      },
      "sa": {
        "e": "sa",
        "r1": "sh",
        "r2": "sd",
        "r3": "sv",
        "sh": "r1",
        "sv": "r3",
        "sd": "r2",
        "sa": "e"
      }
    }
  },
  "mechanics": {
    "allowed_actions": [
      "swap"
    ],
    "show_cayley_button": true,
    "show_generators_hint": false,
    "inner_doors": [],
    "palette": null
  },
  "visuals": {
    "background_theme": "stone_vault",
    "ambient_particles": "dust_motes",
    "crystal_style": "basic_gem",
    "edge_style": "thin_thread"
  },
  "hints": [
    {
      "trigger": "after_30_seconds_no_action",
      "text": "Стрелки исчезли! Попробуйте отразить квадрат, а не только вращать."
    },
    {
      "trigger": "after_first_valid",
      "text": "Симметрий стало больше! Попробуйте скомбинировать два найденных ключа!"
    },
    {
      "trigger": "after_4_found",
      "text": "Повороты найдены. Но всего 8 — попробуйте отражения!"
    }
  ],
  "echo_hints": [
    {
      "text": "Стрелки исчезли — теперь можно не только вращать, но и отражать.",
      "target_crystals": []
    },
    {
      "text": "Найдите 4 поворота, потом попробуйте обменять кристаллы через диагональ или сторону.",
      "target_crystals": []
    },
    {
      "text": "Используйте СКОМБИНИРОВАТЬ: поворот + отражение = новое отражение. Так найдутся все 8.",
      "target_crystals": [
        0,
        1,
        2,
        3
      ]
    }
  ],
  "layers": {
    "layer_3": {
      "title": "Группы — брелки",
      "instruction": "Соберите все брелки — наборы ключей, образующие группу",
      "subgroup_count": 10,
      "subgroups": [
        {
          "order": 1,
          "elements": [
            "e"
          ],
          "generators": [],
          "is_trivial": true,
          "is_normal": true
        },
        {
          "order": 2,
          "elements": [
            "e",
            "r2"
          ],
          "generators": [
            "r2"
          ],
          "is_trivial": false,
          "is_normal": true
        },
        {
          "order": 2,
          "elements": [
            "e",
            "sh"
          ],
          "generators": [
            "sh"
          ],
          "is_trivial": false,
          "is_normal": false
        },
        {
          "order": 2,
          "elements": [
            "e",
            "sv"
          ],
          "generators": [
            "sv"
          ],
          "is_trivial": false,
          "is_normal": false
        },
        {
          "order": 2,
          "elements": [
            "e",
            "sd"
          ],
          "generators": [
            "sd"
          ],
          "is_trivial": false,
          "is_normal": false
        },
        {
          "order": 2,
          "elements": [
            "e",
            "sa"
          ],
          "generators": [
            "sa"
          ],
          "is_trivial": false,
          "is_normal": false
        },
        {
          "order": 4,
          "elements": [
            "e",
            "r1",
            "r2",
            "r3"
          ],
          "generators": [
            "r1"
          ],
          "is_trivial": false,
          "is_normal": true
        },
        {
          "order": 4,
          "elements": [
            "e",
            "sh",
            "r2",
            "sv"
          ],
          "generators": [
            "sh",
            "r2"
          ],
          "is_trivial": false,
          "is_normal": true
        },
        {
          "order": 4,
          "elements": [
            "e",
            "sd",
            "sa",
            "r2"
          ],
          "generators": [
            "sd",
            "sa"
          ],
          "is_trivial": false,
          "is_normal": true
        },
        {
          "order": 8,
          "elements": [
            "e",
            "r1",
            "r2",
            "r3",
            "sh",
            "sv",
            "sd",
            "sa"
          ],
          "generators": [
            "r1",
            "sh"
          ],
          "is_trivial": true,
          "is_normal": true
        }
      ],
      "filtered": false
    }
  }
}